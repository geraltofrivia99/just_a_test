import React from 'react';
import {connect} from 'react-redux'
import {Link, withRouter} from 'react-router-3'
import {compose} from 'redux'
import classNames from 'classnames'
// import * as R from 'ramda'

import {getCatigories, getActiveCatigoryId} from 'selectors'

const Catigories = ({catigories, activeCatigoryId }) => {
    const renderCatigories = (cat, index) => {
        // const getActiveState = R.propEq('id', activeCatigoryId)
        const getActiveState = (cat) => {
            if(Number(cat.id) !== Number(activeCatigoryId)) {return false}
            return true
        }
        const linkClass = classNames({
            'list-group-item': true,
            'active': getActiveState(cat)
        })
        return (
            <Link
                to={`/catigories/${cat.id}`}
                className={linkClass}
                key={index}
                
            >
                {cat.name}
            </Link>
        )
    }
    const renderAllCategory =() => {
        const linkClass = classNames({
            'list-group-item': true,
            'active': !activeCatigoryId
        })
        return (
            <Link
                to='/'
                className={linkClass}
            >
                All
            </Link>
        )
    }
    return (
        <div className='well'>
            <h4>Brand</h4>
            <div className='list-group'>
                {renderAllCategory()}
                {catigories.map((cat, index)=> renderCatigories(cat, index))}
            </div>    
        </div>
    )
}

const mapStateToProps = (state, ownProps) => ({
    catigories: getCatigories(state),
    activeCatigoryId: getActiveCatigoryId(ownProps)
})

export default compose(
    withRouter,
    connect(mapStateToProps, null)
  )(Catigories)

// export default compose(
//     withRouter,
//     connect(mapStateToProps, null) (Catigories)
// )
// export default connect(mapStateToProps, null) (Catigories)